<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <title>Hello World</title>
</head>
<body>
    <!--<div class="app">
            <h1>Apache Cordova</h1>
            <div id="deviceready" class="blink">
                <p class="event listening">Connecting to Device</p>
                <p class="event received">Device is Ready</p>
            </div>
        </div>-->
    <div id="demo">
       <!--<form name="Demo" action="POST" method="post">-->
        <input id="LoginButton" type="button" value="GET ITEMS" onclick="soap()" />
        <div id="response">

        </div>
          <!-- </form>-->
    </div>

   <!-- <div id="divList" data-role="content">
        <ul id="details" data-role="listview" data-inset="true"></ul>
    </div>-->
    <div id="details">
    </div>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript">


        //function onDeviceReady() { }
        //document.addEventListener("deviceready", onDeviceReady, false);

        //function LoginButton_onclick() {
        //    $.ajax({
        //        type: "POST",
        //        contentType: "application/json; charset=utf-8",
        //        dataType: "json",
        //        url: "http://localhost:57564/EmployeeData.asmx?op=HelloWorld",
        //        data: '{}',
        //        success: function (msg) {
        //            alert(msg);
        //            jsonArray = $.parseJSON(msg.d);
        //            var $ul = $('<ul id="details">');
        //            for (i = 0; i < jsonArray.length; i++) {
        //                $("#details").append('<div id="' + i + '" name="head" >' + jsonArray[i].name + '</div>');
        //            }
        //        },
        //        error: function (msg) {
        //            alert("Error");
        //        }
        //    });

        //}

        //$(document).ready(function () {
        //    $("#LoginButton").click(function (event) {
        //        alert("hello");
        //        var webserUrl = "http://localhost:57564/EmployeeData.asmx";
        //        var soapRequest =
        //                        '<?xml version="1.0" encoding="utf-8"?>'+
        //                        '<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"'+
        //                         'xmlns:xsd="http://www.w3.org/2001/XMLSchema"' +
        //                         'xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">'+
        //                          '<soap:Body>'+
        //                        '<Add xmlns="http://tempuri.org/">'+
        //                        '<x>40</x>'+
        //                        '<y>50</y>'+
        //                        '</Add>'+
        //                        '</soap:Body>'+
        //                        '</soap:Envelope>';
        //        $.ajax({
        //            type: "POST",
        //            url: webserUrl,
        //            contentType: "text/xml",
        //            dataType: "xml",
        //            data: soapRequest,
        //            success: SuccessOccur,
        //            error: ErrorOccur
        //        });
        //    });
        //});
        //function SuccessOccur(data, status, req) {
        //    if (status == "success")
        //        alert(req.responseText);
        //}
        //function ErrorOccur(data, status, req) {
        //    alert(req.responseText + " " + status);
        //}
        //var webserUrl = "http://localhost:57564/EmployeeData.asmx?op=Add";
        //var sr = '<?xml version="1.0" encoding="utf-8"?>';
        //    sr += '<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"';
        //    'xmlns:xsd="http://www.w3.org/2001/XMLSchema"';
        //                 'xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">' +
        //                  '<soap:Body>' +
        //                '<Add xmlns="http://tempuri.org/">' +
        //                '<x>40</x>' +
        //                '<y>50</y>' +
        //                '</Add>' +
        //                '</soap:Body>' +
        //                '</soap:Envelope>';
        //function callService() {
        //    alert("hhh");
        //    $.ajax({
        //        type: "POST",
        //        url: webserUrl,
        //        contentType: "text/xml; charset=utf-8",
        //        dataType: "xml",
        //        data: soapRequest,
        //        processData: false,
        //        success: SuccessOccur,
        //        error: ErrorOccur
        //    });
        //    alert("hhh");
        //    return false;
        //}
        //function SuccessOccur(data, status, req) {
        //    if (status == "success")
        //        alert(req.responseText);
        //    alert("lllll");
        //}
        //function ErrorOccur(data, status, req) {
        //    alert(req.responseText + " " + status);
        //}
        //$(document).ready(function () {
        //    jQuery.support.cors = true;
        //});
        function soap() {
            var xmlhttp = new XMLHttpRequest();
            
            var sr = "<?xml version='1.0' encoding='utf-8'?>";
            sr += "<soap:Envelope xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xmlns:xsd='http://www.w3.org/2001/XMLSchema' xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/'>";
            sr += "<soap:Body>";
            sr += "<Add xmlns='http://tempuri.org/'>";
            sr += "<x>40</x>";
            sr += "<y>50</y>";
            sr += "</Add>";
            sr += "</soap:Body>";
            sr += "</soap:Envelope>";

            // Send the POST request
            xmlhttp.open("POST", "http://localhost:57564/EmployeeData.asmx", false);
            //xmlhttp.setRequestHeader("Accept", "text/xml");
            //xmlhttp.setRequestHeader("Host", "localhost");
            xmlhttp.setRequestHeader("Content-Type", "text/xml; charset=utf-8");
            //xmlhttp.setRequestHeader("Content-Length", "length");
            xmlhttp.setRequestHeader("SOAPAction", "http://tempuri.org/Add");
            // send request
            // ...
                var handleStateChange = function () {
                if (xmlhttp.readyState == 4) {
                    alert(xmlhttp.readyState);
                    alert(xmlhttp.status);
                    if (xmlhttp.status == 200) {
                        //alert('done use firebug to see response');
                        alert('Response' + xmlhttp.responseText);
                        alert(xmlhttp.status);
                        callback();
                    }
                    else {
                        alert('Error ' + xmlhttp.status);
                    }
                }
                }
                xmlhttp.onreadystatechange = handleStateChange;
                xmlhttp.send();
        }
        function callback(data) {
            alert(data);
        }

    </script>
</body>
</html>
