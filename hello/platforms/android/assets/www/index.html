<!DOCTYPE>
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head>
    <meta charset="utf-8"  content="no"/>
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <title>Hello World</title>
</head>
<body>
    <!--<div class="app">
            <h1>Apache Cordova</h1>
            <div id="deviceready" class="blink">
                <p class="event listening">Connecting to Device</p>
                <p class="event received">Device is Ready</p>
            </div>
        </div>-->
    <div id="demo"> 
        <input id="LoginButton" type="button" value="GET Data" onclick="javascript:soap();"/>

        <div id="response">
           
        </div>

    </div>

   <!-- <div id="divList" data-role="content">
        <ul id="details" data-role="listview" data-inset="true"></ul>
    </div>-->
    <div id="details">
    </div>
    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="phonegap1.3.0.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript">


        //function onDeviceReady() { }
        //document.addEventListener("deviceready", onDeviceReady, false);

        //function LoginButton_onclick() {
        //    $.ajax({
        //        type: "POST",
        //        contentType: "application/json; charset=utf-8",
        //        dataType: "json",
        //        url: "http://localhost:57564/EmployeeData.asmx?op=HelloWorld",
        //        data: '{}',
        //        success: function (msg) {
        //            alert(msg);
        //            jsonArray = $.parseJSON(msg.d);
        //            var $ul = $('<ul id="details">');
        //            for (i = 0; i < jsonArray.length; i++) {
        //                $("#details").append('<div id="' + i + '" name="head" >' + jsonArray[i].name + '</div>');
        //            }
        //        },
        //        error: function (msg) {
        //            alert("Error");
        //        }
        //    });

        //}

        //$(document).ready(function () {
        //    $("#LoginButton").click(function (event) {
        //        alert("hello");
        //        var webserUrl = "http://localhost:57564/EmployeeData.asmx?op=Add";
        //        alert(webserUrl);
        //        var sr = "<?xml version='1.0' encoding='utf-8'?>";
        //            sr += "<soap:Envelope";
        //            sr +=" xmlns:xsi = 'http://www.w3.org/2001/XMLSchema-instance'";
        //            sr +=" xmlns:xsd='http://www.w3.org/2001/XMLSchema'";
        //            sr +=" xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/'>";
        //            sr += "<soap:Body>";
        //            sr += "<Add xmlns='http://tempuri.org/'>";
        //            sr += "<x>40</x>";
        //            sr += "<y>50</y>";
        //            sr += "</Add>";
        //            sr += "</soap:Body>";
        //            sr += "</soap:Envelope>";
        //            $.ajax({
        //            type: "POST",
        //            url: webserUrl,
        //            contentType: "text/xml; charset=utf-8",
        //            dataType: "xml",
        //            data: sr,
        //            success: function (data, status, req) {
        //                if (status == "success")
        //                    alert(req.responseText);
        //                alert(data.d);
        //            },
        //            error: function (data, status, req) {
        //                alert(req.responseText + " " + status);
        //            }
        //        });
        //    });
        //});
        //function SuccessOccur(data, status, req) {
        //    if (status == "success")
        //        alert(req.responseText);
        //}
        //function ErrorOccur(data, status, req) {
        //    alert(req.responseText + " " + status);
        //}
        //$(document).ajaxError(function (e, jqxhr, settings, exception) {
        //    if (jqxhr.readyState == 0 || jqxhr.status == 0) {
        //        return; //Skip this error
        //    }
        //var webserUrl = "http://localhost:57564/EmployeeData.asmx?op=Add";
        //var sr = '<?xml version="1.0" encoding="utf-8"?>';
        //    sr += '<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"';
        //    'xmlns:xsd="http://www.w3.org/2001/XMLSchema"';
        //                 'xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">' +
        //                  '<soap:Body>' +
        //                '<Add xmlns="http://tempuri.org/">' +
        //                '<x>40</x>' +
        //                '<y>50</y>' +
        //                '</Add>' +
        //                '</soap:Body>' +
        //                '</soap:Envelope>';
        //function callService() {
        //    alert("hhh");
        //    $.ajax({
        //        type: "POST",
        //        url: webserUrl,
        //        contentType: "text/xml; charset=utf-8",
        //        dataType: "xml",
        //        data: soapRequest,
        //        processData: false,
        //        success: SuccessOccur,
        //        error: ErrorOccur
        //    });
        //    alert("hhh");
        //    return false;
        //}
        //function SuccessOccur(data, status, req) {
        //    if (status == "success")
        //        alert(req.responseText);
        //    alert("lllll");
        //}
        //function ErrorOccur(data, status, req) {
        //    alert(req.responseText + " " + status);
        //}
        //$(document).ready(function () {
        //    jQuery.support.cors = true;
        //});
       function soap() {
           var xmlhttp = new XMLHttpRequest();
           var url = "http://192.168.0.179:2015/EmployeeData.asmx?op=HelloWorld";
           //url = url + "?enable_cors_headers=true&enable_http_auth=true";
            xmlhttp.open("POST", url, true);
        //xhr.setRequestHeader("Access-Control-Allow-Origin", "*");
            var xmlToSend = '<?xml version="1.0" encoding="utf-8"?>';
            xmlToSend += '<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ';
            xmlToSend += 'xmlns:xsd="http://www.w3.org/2001/XMLSchema"" ';
            xmlToSend += 'xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">';
            xmlToSend += '<soap:Body>';
            xmlToSend += '<HelloWorld xmlns="http://localhost/2015/" />';
            xmlToSend += '</soap:Body>';
            xmlToSend += '</soap:Envelope>';
                var handleStateChange = function () {

                    if (xmlhttp.readyState == 4) {
                    if (xmlhttp.status == 200) {
                        alert('Response' + xmlhttp.responseText);
                        alert(xmlhttp.status);
                        callback(xmlhttp.responseText);
                    }
                    else {
                        alert('Error ' + xmlhttp.status);

                        callback(xmlhttp.statusText);
                    }
                }
                }
                xmlhttp.setRequestHeader("Post", "/EmployeeData.asmx HTTP/1.1");
                xmlhttp.setRequestHeader('SOAPAction', "http://localhost/2015/HelloWorld");
                //xmlhttp.setRequestHeader('Access-Control-Allow-Origin', '*');
                xmlhttp.setRequestHeader('Content-Type', 'text/xml; charset=utf-8');
                xmlhttp.onreadystatechange = handleStateChange;
                xmlhttp.send(xmlToSend);
        }
        function callback(data) {
            alert(data);
        }
//function soap() {
//    var bool = false;
//    var request;
//    if (window.XMLHttpRequest) { // code for IE7+, Firefox, Chrome, Opera, Safari
//        netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
//        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");	
//        request = new XMLHttpRequest();
//        bool = true;
//    }
//    else {// code for IE6, IE5
//        request = new ActiveXObject('Microsoft.XMLHTTP');
//    }

//    var method = 'POST';
//    var url = 'http://cbr.ru/CreditInfoWebServ/CreditOrgInfo.asmx';
//    var async = true;
//    request.open(method, url, async);

//    request.onreadystatechange = function() {
//        if (bool) {
//            netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
//            netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
//        }
//        if (request.readyState == 4 && request.status == 200) {
//            document.getElementById("myDiv").innerHTML = 'Response: '
//            + request.responseText; 
//        }
//        else if (request.readyState == 4 && request.status != 200) {
//            document.getElementById("myDiv").innerHTML
//            = 'Status: ' + request.status + '&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;' 
//            + request.statusText + '<br/><br/>' +
//            'Response: ' + request.getAllResponseHeaders();
//        }
//        else {
//            document.getElementById("myDiv").innerHTML = 'Processing...';
//        }
//    }
//    var param = '040173743';
//   var xmlToSend = "<?xml version='1.0' encoding='utf-8'?>";
//    xmlToSend += "<soap:Envelope xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' ";
//    xmlToSend += "xmlns:xsd='http://www.w3.org/2001/XMLSchema' ";
//    xmlToSend += "xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/'>";
//    xmlToSend += "<soap:Body><HelloWorld xmlns='http://tempuri.org/' />";
//    xmlToSend += "</soap:Body></soap:Envelope>";


//    request.setRequestHeader('Content-Type', 'text/xml; charset=utf-8');
//    request.setRequestHeader('SOAPAction', '"http://tempuri.org/Add"');

//    request.send(xmlToSend);
        //}
        //function soap() {
        //    var xmlhttp = new XMLHttpRequest();
        //    xmlhttp.open("POST", "http://localhost:2015/EmployeeData.asmx?op=HelloWorld", true);
        //    //xhr.setRequestHeader("Access-Control-Allow-Origin", "*");
        //    var xmlToSend = '<?xml version="1.0" encoding="utf-8"?>';
        //    xmlToSend += '<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ';
        //    xmlToSend += 'xmlns:xsd="http://www.w3.org/2001/XMLSchema" ';
        //    xmlToSend += 'xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"';
        //    xmlToSend += '<soap:Body>';
        //    xmlToSend += '<HelloWorld xmlns="http://localhost/2015/MyMobApp" />';
        //    xmlToSend += '</soap:Body>';
        //    xmlToSend += '</soap:Envelope>';
        //    xmlhttp.onreadystatechange = function () {

        //        if (xmlhttp.readyState == 4) {
        //            alert(xmlToSend);
        //            alert(xmlhttp.readyState);
        //            alert(xmlhttp.status);
        //            if (xmlhttp.status == 200) {
        //                //alert('done use firebug to see response');
        //                alert('Response' + xmlhttp.responseText);
        //                alert(xmlhttp.status);
        //                callback();

        //            }
        //            else {
        //                alert('Error ' + xmlhttp.status);
        //            }
        //        }
        //    }
        //    // = handleStateChange;
        //    xmlhttp.send(xmlToSend);
        //    var xmlResponse = xmlHTTP.responseXML;
        //    alert(xmlResponse.xml);
        //}
        //function callback(data) {
        //    alert(data);
        //}
</script>
</body>
</html>
